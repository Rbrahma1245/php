<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link
      href="https://fonts.googleapis.com/css?family=Oswald"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Salsa"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./index.css" />

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <header class="header">
      <div class="header-left">
        <img src="../Images/star.png" alt="logo" />
        <div>HOME</div>
        <div>ABOUT</div>
        <div>CONTACT US</div>
      </div>
    </header>

    <div
      id="container"
      class="d-flex mt-5 flex-wrap justify-content-center"
    ></div>

    <script>
      let container = document.getElementById("container");

      let globalArr;
      let str = "";

      const apiKey = "0bf242140893456a96c0da4ef9d665dd";
      const apiUrl = "https://api.spoonacular.com/recipes/random";

      let getData = async () => {
        try {
          let response = await fetch(`${apiUrl}?apiKey=${apiKey}`);
          let data = await response.json();
          globalArr = data.recipes;

          displayData(globalArr);
        } catch (err) {
          console.log(err.message);
        }
      };
      getData();

      function displayData(arrList) {
        arrList.map((e, i) => {
          let { id, title, image, summary } = e;

          console.log(e);

          str =
            str +
            `  <div class="card " key=${id + "" + i} style="width: 28rem;">
                    <img src=${image} class="card-img-top header-img" alt="Invalid">
                    <div class="card-body">
                         <h5 class="card-title">${title}</h5>
                         <p class="card-text" id=${"desc" + id}>${summary}</p>
                         <a  id=${
                           "toggle" + id
                         } onclick="toggleText(${id})" class="btn btn-primary float-right">Read More</a>
                         
                    </div>
                </div>`;
          container.innerHTML = str;
        });
      }

      function toggleText(id) {
        console.log(id);

        let descText = document.getElementById(`${"desc" + id}`);
        let toggleButton = document.getElementById("toggle" + id);

        if (descText.style.whiteSpace === "normal") {
          descText.style.whiteSpace = "nowrap";
          descText.style.overflow = "hidden";
          descText.style.textOverflow = "ellipsis";
          toggleButton.textContent = "Read More";
        } else {
          descText.style.whiteSpace = "normal";
          descText.style.overflow = "visible";
          descText.style.textOverflow = "clip";
          toggleButton.textContent = "Show Less";
        }
      }
    </script>
  </body>
</html>
