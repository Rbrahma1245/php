<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link
      href="https://fonts.googleapis.com/css?family=Oswald"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Salsa"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./indexx.css" />

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!-- Snackbar -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/snackbarjs@1.1.0/dist/snackbar.min.css"
    />
  </head>

  <body>
    <header class="header">
      <div class="header-left">
        <img src="../Images/star.png" alt="logo" />
        <div>HOME</div>
        <div>ABOUT</div>
        <div>CONTACT US</div>
      </div>
    </header>

    <div
      id="container"
      class="d-flex mt-5 flex-wrap justify-content-center"
    ></div>

    <!-- SWEET ALERT -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.16/dist/sweetalert2.all.min.js"></script>
    <script>
      let container = document.getElementById("container");

      let globalArr;
      let str = "";

      const apiUrl = "https://www.themealdb.com/api/json/v1/1/categories.php";

      let getData = async () => {
        try {
          let response = await fetch(apiUrl);
          let data = await response.json();
          globalArr = data.categories;

          displayData(globalArr);
        } catch (err) {
          console.log(err.message);
        }
      };
      getData();

      function printItem(list) {
        let {
          idCategory,
          strCategory,
          strCategoryDescription,
          strCategoryThumb,
        } = list;

        str = `  <div class="card " key=${idCategory} style="width: 25rem;">
                    <img src=${strCategoryThumb} class="card-img-top header-img" alt="Invalid">           
                    <div class="card-body">
                         <h5 class="card-title">${strCategory}</h5>
                         <p class="card-text desc-text" id=${
                           "desc" + idCategory
                         }>${strCategoryDescription}</p>
                         <a  id=${
                           "toggle" + idCategory
                         } onclick="toggleText(${idCategory})" class="btn btn-primary float-end">Read More</a>

                         <button onClick="prevItem(${idCategory})" class="btn btn-outline-info" >PREV</button>

                         <button onClick="nextItem(${idCategory})" class="btn btn-outline-secondary">NEXT</button>
                         
                    </div>
                </div>`;
        container.innerHTML = str;
      }

      function displayData(arrList) {
        printItem(arrList[0]);
      }

      function nextItem(id) {
        let item = globalArr[id++];

        if (item == undefined) {
          Swal.fire("Oops! It seems like there are no more items.");
        } else {
          console.log(item);
          printItem(item);
        }
      }

      function prevItem(id) {
        console.log(--id);
        let item = globalArr[--id];

        if (item == undefined) {
          Swal.fire("Oops! It seems like there are no more items.");
        } else {
          console.log(item);
          printItem(item);
        }
      }

      function toggleText(id) {
        console.log(id);

        let descText = document.getElementById(`${"desc" + id}`);
        let toggleButton = document.getElementById("toggle" + id);

        if (descText.style.display === "inline-block") {
          descText.style.overflow = "hidden";
          descText.style.display = "-webkit-box";
          descText.style.webkitLineClamp = "3";
          descText.style.textOverflow = "ellipsis";
          toggleButton.textContent = "Read More";
        } else {
          descText.style.display = "inline-block";
          descText.style.overflow = "visible";
          toggleButton.textContent = "Show Less";
        }
      }
    </script>
  </body>
</html>
