<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link
      href="https://fonts.googleapis.com/css?family=Oswald"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Salsa"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./index.css" />

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

<link ref="stylesheet" type="text/css" href="dist/snackbar.min.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-left">
        <img src="../Images/star.png" alt="logo" />
        <div>HOME</div>
        <div>ABOUT</div>
        <div>CONTACT US</div>
      </div>
    </header>

    <div
      id="container"
      class="d-flex mt-5 gap-3 flex-wrap justify-content-center"
    ></div>

    

    <script>
      let container = document.getElementById("container");

      let globalArr;
      let str = "";
      

      const apiUrl = "https://fakestoreapi.com/products";

      let getData = async () => {
        try {
          let response = await fetch(apiUrl);
          let data = await response.json();
          globalArr = data;

          displayData(globalArr);
        } catch (err) {
          console.log(err.message);
        }
      };
      getData();

      function displayData(arrList) {
        let uniqueCategories = {};

        let firstItemFromEachCategory = arrList.filter((item, index) => {
          const category = item.category;

          if (!uniqueCategories[category]) {
            uniqueCategories[category] = true;
            return true;
          }

          return false;
        });
        console.log(firstItemFromEachCategory);

        arrList.map((e, i) => {
          let { id, title, image, description, price } = e;

          str =
            str +
            `  <div class="card mb-3 " key=${
              id + "" + i
            } style="width: 18rem; padding: 18px">
                    <img src=${image} class="card-img-top header-img" alt="Invalid">
                    <div class="card-body">
                         <h5 class="card-title">${title}</h5>
                         <h6 class="card-subtitle mb-2 text-muted" >$ ${price}</h6>
                         <p class="card-text" id=${
                           "desc" + id
                         }>${description}</p>
                         <a  id=${
                           "toggle" + id
                         } onclick="toggleText(${id})" class="btn btn-primary float-right">Read More</a>
                         
                    </div>
                </div>`;
          container.innerHTML = str;
        });
      }

      function toggleText(id) {
        console.log(id);

        let descText = document.getElementById(`${"desc" + id}`);
        let toggleButton = document.getElementById("toggle" + id);

        if (descText.style.whiteSpace === "normal") {
          descText.style.whiteSpace = "nowrap";
          descText.style.overflow = "hidden";
          descText.style.textOverflow = "ellipsis";
          toggleButton.textContent = "Read More";
        } else {
          descText.style.whiteSpace = "normal";
          descText.style.overflow = "visible";
          descText.style.textOverflow = "clip";
          toggleButton.textContent = "Show Less";
        }
      }
    </script>
  </body>
</html>
